# RDS

AWS에서 RDS로 데이터베이스 생성할 수 있다.



## RDS 생성

아래는 RDS로 MySQL의 데이터베이스를 만들 때 설정하는 옵션들이다. (무료를 위한 설정)

#### 설정

- 데이터베이스 생성 방식 선택

  : 표준 생성

- 엔진 옵션 MySQL

  : MySQL (최신 버전)

- 템플릿

  : 프리 티어

- DB 인스턴스 식별자

  : sasil-db
  (AWS에서 DB구분하기 위한 것)

- 마스터 사용자 이름

  : 기본값은 admin으로 되어있음 (변경해도 괜찮다.)

- 마스터 암호



#### DB 인스턴스 클래스

- DB 인스턴스 클래스

  : 버스터블 클래스 (db.t2.micro)



#### 스토리지

- 스토리지 유형

  : 범용 SSD(gp2)

- 할당된 스토리지

  : 20

- 스토리지 자동 조정

  : 스토리지 자동 조정 활성화 끄기!! (유료)



#### 연결

- VPC

  : Default

- 서브넷 그룹

  : Default

- 퍼블릭 액세스

  : 테스트할 때는 "예"로 해도 괜찮지만, 나중에 "아니요"로 변경해줘야함

- VPC 보안 그룹

  : 일단은 default로 하고, DB 생성한 후 보안그룹을 하나 새로 만들어 변경



#### 데이터베이스 인증

- 인증 옵션

  : 암호 인증



#### 추가 구성

무료로 사용하기 위한 설정

- 백업

  : 자동 백업 활성화 off

- 백업 보존 기간

  : 0일

- 스냅샷으로 태그 복사

  : off



## 추가 설정

### 보안 그룹

RDS를 위한 보안그룹을 하나 새로 만들어준다.

- 인바운드 규칙

  : MYSQL/Aurora로 두 개를 만드는데, 하나는 "내 IP주소", 다른 하나는 EC2 보안그룹의 "보안 그룹 ID"로 설정해준다.

생성했으면, 아까 만든 DB의 보안 그룹을 변경해준다.



### 한글 사용을 위한 설정

위에서 만든 DB에서 한글을 사용하기 위해서는 DB의 character-set 관련 설정을 변경해줘야 한다.



#### character-set 관련 설정

default 파라미터는 변경이 불가능하다.

- [파라미터 그룹 → 파라미터 그룹 생성]을 클릭하여 파라미터 그룹을 하나 만들고, 파라미터를 편집한다.

- 여기서 character-set과 관련된 항목들의 `latin1`로 되어있는 값들을 `utf8` or  `utf8mb4` or `ut8mb4-general-ci`로 변경
- DB 인스턴스의 "DB 파라미터 그룹"을 변경
- 재부팅

- DB에 접속해서 확인

  ```
  show variables like 'c%';
  ```

- 혹시 character_set_database의 파라미터 값이 latin1로 안바뀌어져 있다면, 아래 명령어를 통해 변경해주면 된다.

  ```
  ALTER DATABASE 본인db
  CHARACTER SET = 'utf8'
  COLLATE = 'utf8_general_ci';
  ```

  