# 1장) HTTP 개관

### 1.1) HTTP: 인터넷의 멀티미디어 배달부

**신뢰성 있는 데이터 전송 프로토콜**을 사용하기 때문에, 데이터가 지구 반대편에서 오더라도 전송 중 손상되거나 꼬이지 않음을 보장한다.



### 1.2) 웹 클라이언트와 서버

웹 콘텐츠는 **웹 서버**에 존재한다. 웹 서버는 보통 **HTTP 프로토콜**로 의사소통하기 때문에 **HTTP 서버**라고 불린다.

**HTTP 서버**는 인터넷의 데이터를 저장하고, **HTTP 클라이언트**가 요청한 데이터를 제공한다.

- 클라이언트: 서버에게 HTTP 요청 전송 (e.g. IE, Google과 같은 웹브라우저)
- 서버: 요청된 데이터를 HTTP 응답으로 돌려줌



### 1.3) 리소스

웹 서버는 **웹 리소스**를 관리하고 제공한다. 어떤 종류의 콘텐츠 소스도 리소스가 될 수 있다.

- 정적 리소스: HTML, 텍스트 파일, 이미지 파일, 동영상 파일 등
- 동적 리소스: 사용자, 요청정보, 시간 등에 따라 다른 콘텐츠를 생성



#### 1.3.1) 미디어 타입

웹 서버는 모든 HTTP 객체 데이터에 **MIME**(Multipurpose Internet Mail Extensions, 다목적 인터넷 메일 확장) 타입이라는 데이터 포맷 라벨을 붙인다.

MIME 구성: 주 타입(primary object type) / 부 타입(specific subtype)

ex) Content-type: image/jpeg → MIME 타입



#### 1.3.2) URI

웹 서버 리소스는 각자 이름을 갖고 있기 때문에, 클라이언트는 관심있는 리소스를 지목할 수 있다. 서버 리소스 이름은 통합 자원 식별자(uniform resource identifier, **URI**)로 불리며, **URI로 정보 리소스를 고유하게 식별하고 위치를 지정**할 수 있다.

**URI**는 **URL**과 **URN**으로 구분된다.

 

#### 1.3.3) URL

통합 자원 지시자(uniform resource locator, URL)는 **특정 서버의 한 리소스에 대한 구체적인 위치를 서술한다.** 오늘날 대부분의 URI는 URL이다.

ex) http://www.joes-hardware.com/specials/saw-blade.gif

- http → **스킴(scheme)**: 리소스 접근을 위해 사용되는 프로토콜 서술 (http 프로토콜 사용)
- www.joes-hardware.com → **서버의 인터넷 주소**
- /specials/saw-blade.gif → **웹 서버의 리소스**



#### 1.3.4) URN

유니폼 리소스 이름(uniform resource name, URN)은 **한 리소스에 대해, 그 리소스의 위치에 영향을 받지 않는 유일한 이름 역할**을 한다. URN은 **리소스 위치를 분석하기 위한 인프라 지원이 필요해** 아직 많이 쓰이지 못하고 있다.



### 1.4) 트랜잭션

HTTP 트랜잭션: **요청**(클라이언트 → 서버) + **응답**(서버 → 클라이언트)

→ HTTP 메시지를 통해 이루어짐



#### 1.4.1) 메서드

메서드는 **서버에게 어떤 동작이 취해져야 하는지 말해준다.** 모든 HTTP 요청 메시지는 한 개의 메서드를 갖는다.

ex) GET, PUT, DELETE, POST 등



#### 1.4.2) 상태 코드

상태코드는 클라이언트에게 요청이 성공했는지 아니면 추가 조치가 필요한지 알려주는 세 자리 숫자다. 모든 HTTP 응답 메시지는  상태 코드와 함께 반환된다.

ex) 200, 302, 404 등



#### 1.4.3) 웹 페이지는 여러 객체로 이루어질 수 있다

하나의 작업을 수행하기 위해 여러 HTTP 트랜잭션(요청+응답)을 수행한다.



### 1.5) 메시지

**HTTP 메시지**는 단순한 줄 단위의 문자열이다. 이진 형식이 아닌 일반 텍스트이기 때문에 사람이 읽고 쓰기 쉽다.

```
// **요청 메세지**
// 시작줄
GET /test/hi-ther.txt HTTP/1.0
// 헤더
Accept: text/*
Accept-Language: en, fr


// **응답 메세지**
// 시작줄
HTTP/1.0 200 OK
// 헤더
Content-type: text/plain
Content-length: 19
// 본문
Hi! I'm a message!
```

- **시작줄**: 메세지의 첫 줄
  - 요청: 무엇을 해야하는지 나타낸다.
  - 응답: 무슨 일이 일어났는지 나타낸다.

- **헤더**: 시작줄 다음 0개 이상의 헤더 필드
  - 콜론(:)으로 구분된 하나의 `name: value`, 추가하려면 한 줄 더하기
  - 빈 줄로 끝남

- **본문**: 어떤 종류의 데이터든 들어갈 수 있음



### 1.6) TCP 커넥션

어떻게 TCP(Transmission Control Protocol, 전송 제어 프로토콜) 커넥션을 통해 한 곳에서 다른 곳으로 옮겨가는지에 대하여



#### 1.6.1) TCP/IP

**HTTP는 애플리케이션 계층 프로토콜**이다. HTTP는 네트워크 통신의 핵심적인 세부사항에 대해서 신경쓰지 않고, 대신 신뢰성있는 프로토콜인 **TCP/IP**에게 맡긴다.

TCP는 다음을 제공한다.

- 오류없는 데이터 전송
- 순서에 맞는 전달(데이터는 언제나 보낸 순서대로 도착한다)
- 조각나지 않는 데이터 스트림(언제든 어떤 크기로든 보낼 수 있다)



인터넷 자체가 전 세계의 컴퓨터와 네트워크 장치들 사이에서 대중적으로 사용되는 TCP/IP에 기초하고 있다.

TCP/IP는 TCP와 IP가 층을 이루는 패킷 교환 네트워크 프로토콜의 집합이다. **각 네트워크와 하드웨어의 특성을 숨기고, 어떤 종류의 컴퓨터나 네트워크든 서로 신뢰성 있는 의사소통을 가능하게 해준다.**

|                                 | 계층              | 역할                   |
| ------------------------------- | ----------------- | ---------------------- |
| HTTP                            | 애플리케이션 계층 |                        |
| TCP                             | 전송 계층         | end-to-end 통신 보장   |
| IP                              | 네트워크 계층     | 라우팅                 |
| 네트워크를 위한 링크 인터페이스 | 데이터 링크 계층  | perr-to-peer 통신 보장 |
| 물리적인 네트워크 하드웨어      | 물리 계층         | 물리적인 특성          |



#### 1.6.2) 접속, IP 주소 그리고 포트번호

**HTTP 클라이언트가 서버에 메시지를 전송할 수 있게 되기 전**에, **인터넷 프로토콜(Internet Protocol, IP) 주소와 포트번호를 사용해 클라이언트와 서버 사이에 TCP/IP 커넥션**을 맺어야 한다.

**TCP**에서는 서버 컴퓨터에 대한 **IP 주소**와 그 서버에서 실행 중인 프로그램이 사용 중인 **포트번호**가 필요하다.

→ HTTP 서버의 IP 주소와 포트번호를 알아내는 방법: **URL**

- 도메인 이름은 DNS를 통해 IP로 변환

- 포트번호가 생략된 HTTP URL의 포트번호는 80

  

### 1.7) 프로토콜 버전

- HTTP/0.9

  - GET 메서드만 지원

  - 간단한 HTML객체를 받아오기 위해 만들어진 것

  - MIME 타입, HTTP 헤더, 버전 번호는 지원하지 않음

    

- HTTP/1.0

  - 처음으로 널리 쓰이기 시작한 HTTP 버전

  - 버전 번호, HTTP 헤더, 추가 메서드, 멀티미디어 객체 처리를 추가

    

- HTTP/1.0+

  - 확장된 HTTP 버전

  - "keep-alive" 커넥션, 가상 호스팅 지원, 프락시 연결 지원 등 많은 기능이 공식적이진 않지만 사실상 표준으로 HTTP에 추가됨

    

- HTTP/1.1

  - HTTP 설계의 구조적 결함 교정, 두드러진 성능 최적화, 잘못된 기능 제거에 집중

  

- HTTP/2.0

  - HTTP/1.1 성능 문제 개선



### 1.8) 웹의 구성요소

- 프락시 : 클라이언트와 서버 사이에 위치한 HTTP 중개자
- 캐시 : 많이 찾는 웹페이지를 클라이언트 가까이에 보관하는 HTTP 창고
- 게이트웨이 : 다른 애플리케이션과 연결된 특별한 웹 서버
- 터널 : 단순히 HTTP 통신을 전달하기만 하는 특별한 프락시
- 에이전트 : 자동화된 HTTP 요청을 만드는 준지능적 웹 클라이언트