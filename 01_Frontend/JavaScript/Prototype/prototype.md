# Prototype

'코어 자바스크립트'의 CHAPTER 6 정리



### 자바스크립트는 프로토타입 기반 언어

클래스 기반 언어에서는 '상속'을 사용하지만, 프로토타입 기반 언어에서는 어떤 객체를 원형(prototype)으로 삼고, 이를 복제함으로써 상속과 비슷한 효과를 얻는다.



## 1. 프로토타입 개념 이해

어떤 생성자 함수(Constructor)를 new 연산자와 함께 호출하면

Constructor에서 정의된 내용을 바탕으로 새로운 `instance`가 생성

이때 `instance`에는 `**__proto__**` 라는 프로퍼티가 자동으로 부여되는데,

이 프로퍼티는 **생략 가능**하며 Constructor의 `**prototype**`이라는 프로퍼티를 참조.

- `prototype` 과 `__proto__` 은 객체
- `prototype` 객체 내부에는 인스턴스가 사용할 메서드를 저장
- 인스턴스에서도 숨겨진 프로퍼티인 `__proto__` 를 통해 이 메서드들에 접근

### constructor 프로퍼티

생성자 함수의 프로퍼티인 prototype 객체 내부에는 `constructor`라는 프로퍼티가 있음. (`__proto__` 도 동일)

이 프로퍼티는 원래의 생성자 함수(자기 자신)을 참조함.

→ **인스턴스로부터 그 원형이 무엇인지를 알 수 있는 수단**



## 2. 프로토타입 체인

### 메서드 오버라이드

인스턴스가 동일한 이름의 프로퍼티 또는 메서드를 가지고 있으면 기존의 것을 새로운 것으로 덮어 씌운다.



### 프로토타입 체인

어떤 데이터의 `__proto__` 프로퍼티 내부에 다시 `__proto__` 프로퍼티가 연쇄적으로 이어진 것을 **프로토타입 체인**이라고 하고, 이 체인을 따라가며 검색하는 것을 **프로토타입 체이닝**이라고 한다.

ex) `arr`변수는 배열이므로 `arr.__proto__`는 `Array.prototype`를 참조하고, `Array.prototype`은 객체이므로 `Array.prototype.__proto__`는 `Object.prototype` 를 참조한다.



### 객체 전용 메서드의 예외사항

prototype은 반드시 객체이기 때문에, `Object.prototype`이 언제나 프로토타입 체인의 최상단에 위치한다. 따라서 객체에서만 사용할 메서드는 다른 여느 데이터 타입처럼 프로토타입 객체 안에 정의할 수 없다.

- 객체만을 대상으로 동작하는 객체 전용 메서드들은 Object에 `**static method`로 부여**할 수 밖에 없다.

- 생성자 함수인 Object와 인스턴스 객체 리터럴 사이에는 **this를 통한 연결이 불가능**

  → '메서드명 앞의 대상이 곧 this' 대신에 this 사용을 포기하고, **대상 인스턴스를 인자로 직접 주입**해야 하는 방식으로 구현돼있다.