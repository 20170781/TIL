# 2장) URL과 리소스

URL(Uniform Resource Locator)은 인터넷의 리소스를 가리키는 표준이름이다.



### 2.1) 인터넷의 리소스 탐색하기

대부분의 URL은 `스킴://서버위치/경로` 구조로 이루어져 있다.

http://www.joes-hardware.com/seasonal/index-fall.html 이라는 URL을 불러온다고 가정해보자.

- http: **스킴(scheme)**, 리소스 접근을 위해 사용되는 프로토콜 서술 → http 프로토콜 사용
- www.joes-hardware.com → **서버의 위치**, 리소스가 어디에 호스팅 되어있는지
- /seasonal/index-fall.html → **리소스 경로**, 서버에 존재하는 로컬 리소스 중 요청받은 리소스



### 2.2) URL 문법

URL 문법은 스킴에 따라서 약간씩 달라지지만, 대부분 매우 유사하다.

```
<스킴>://<사용자 이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>?<질의>#<프래그먼트>
```

| 컴포넌트                 | 설명                                                         |
| ------------------------ | ------------------------------------------------------------ |
| **스킴**                 | 어떤 프로토콜을 사용하여 서버에 접근해야하는지               |
| 사용자 이름              | 몇몇 스킴은 리소스에 접근하기 위해 사용자 이름이 필요        |
| 비밀번호                 | 사용자 이름에 콜론(:)으로 이어서 기술                        |
| **호스트**               | 리소스를 호스팅하는 서버의 호스트 명이나 IP 주소 (리소스를 호스팅하고 있는 장비) |
| **포트**                 | 리소스를 호스팅하는 서버가 열어 놓은 포트 번호 (장비 내에서 리소스에 접근할 수 있는 서버 위치) <br />많은 스킴이 기본 포트를 가지고 있음 (HTTP는 80) |
| **경로**                 | 서버 내 리소스가 서버 어디에 있는지 (서버와 스킴에 따라 문법이 다름) |
| **파라미터**             | 특정 스킴에서 입력 파라미터를 기술하는 용도.<br />[이름/값]을 쌍으로 가지며, 세미콜론(;)으로 다른 파라미터나 경로와 구분, 여러개 가능 |
| **질의(query)**          | 스킴에서 애플리케이션에 파라미터를 전달하는데 쓰임. URL의 끝에 '?' 문자로 구분 |
| **프래그먼트(fragment)** | 리소스의 조각이나 일부분을 가리키는 이름. URL의 끝에 '#' 문자로 구분 |



### 2.3) 단축 URL

- **상대 URL**: 리소스 안에 있는 리소스를 간결하게 기술하는데 사용 가능
- **URL 자동 확장**: 많은 브라우저에서 URL 일부를 입력하면 나머지 부분을 자동으로 입력해주는 기능 지원



#### 2.3.1) 상대 URL

URL은 상대 URL과 절대 URL 두 가지로 나뉜다. 지금까지는 절대 URL로만 이야기했고, **절대 URL**은 리소스에 접근하는데 필요한 모든 정보를 포함한다.

반면, **상대 URL**은 모든 정보를 담고 있지는 않다. 대신 **기저(base)**라고 하는 다른 URL을 사용해야 한다.

예를 들어, http://www.joes-hardware.com/tools.html 가 가리키는 HTML 문서 내에서 ./hammers.html URL을 가리키는 하이퍼링크가 있다고 하면, 하이퍼링크의 URL은 문서의 URL을 기준으로 상대경로로 해석될 수 있다.

- base URL: http://www.joes-hardware.com/tools.html
- 상대 URL: ./hammers.html
- 새로운 절대 URL: http://www.joes-hardware.com/hammers.html



#### 2.3.2) URL 확장

브라우저들은 URL을 입력한 다음이나 입력하는 동안 자동으로 URL을 확장해준다. → 빠른 입력 가능

- 호스트명 확장

  : 단순한 휴리스틱만을 사용해 입력한 호스트 명을 전체 호스트 명으로 확장

  ex) yahoo → www.yahoo.com

  → 프락시와 같은 다른 HTTP 애플리케이션에 문제를 발생시킬 수 있음

  

- 히스토리 확장

  : 사용자가 과거에 방문했던 URL의 기록을 저장 및 제공

  ex) http://www.joes- → http://www.joes-hardware.com



### 2.4) 안전하지 않은 문자

- 모든 프로토콜이 데이터를 전송하기 위해 서로 다른 장치를 가지고 있기 때문에, 어떤 인터넷 프로토콜을 통해서든 안전하게 전송될 수 있도록 URL을 설계하는 것이 중요

- 안전한 전송: 정보가 유실될 위험 없이 URL을 전송할 수 있는 것
- **이스케이프** 기능을 추가하여, 안전하지 않은 문자를 안전한 문자로 인코딩할 수 있게 하였다.
  - 이스케이프 문자열: US-ASCII에서 사용이 금지된 문자열들, 특정 문자나 데이터를 인코딩할 수 있게 함으로써 이동성과 완성도 높임



### 2.5) 스킴의 바다

대표적인 스킴인 http, https, ftp를 알아보자.

| 스킴  | 설명                                                         |
| ----- | ------------------------------------------------------------ |
| http  | **하이퍼텍스트 전송 프로토콜(Hypertext Transfer Protocol)** 스킴.<br />- 기본 형식: `http://<호스트>:<포트>/<경로>?<질의>#<프래그먼트>`<br />- 기본 포트값: 80 |
| https | http 스킴과 거의 같으며, HTTP 커넥션의 양 끝단에서 암호화하기 위해 **SSL**을 사용.<br />- 기본 형식: `https://<호스트>:<포트>/<경로>?<질의>#<프래그먼트>`<br />- 기본 포트값: 443 |
| ftp   | 파일 전송 프로토콜(File Transfer Protocol) 스킴. <br />FTP 서버에 있는 파일을 내려받거나 올리고, FTP 서버의 디렉토리에 있는 콘텐츠 목록을 가져오는데 사용.<br />- 기본 형식: `ftp://<사용자 이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>` |



### 2.6) 미래

스킴의 단점은 리소스가 옮겨지면 URL을 더이상 사용할 수 없다는 것이다.

이상적인 해결 방법은, 객체의 위치와 상관없이 그 객체를 가리키는 실제 객체의 이름을 사용하는 것이다. → **URN** (Uniform Resource Names)